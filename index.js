var l=Object.defineProperty;var c=(n,e,s)=>e in n?l(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s;var a=(n,e,s)=>(c(n,typeof e!="symbol"?e+"":e,s),s);import{W as g,S as w,P as p,C as m,V as M,G as f,M as v,a as b,b as k,T as u,F as y,c as T,d as D,A as L,D as C}from"./vendor.js";const q=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const t of i)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const t={};return i.integrity&&(t.integrity=i.integrity),i.referrerpolicy&&(t.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?t.credentials="include":i.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(i){if(i.ep)return;i.ep=!0;const t=s(i);fetch(i.href,t)}};q();class S{constructor(e=60,s=1.333,r=1,i=1e3){a(this,"aspectRatio");a(this,"fov");a(this,"znear");a(this,"zfar");a(this,"renderer");a(this,"scene");a(this,"camera");a(this,"clock");this.fov=e,this.aspectRatio=s,this.znear=r,this.zfar=i,this.renderer=new g,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.resize(),window.addEventListener("resize",()=>{this.resize()},!1),window.addEventListener("mousedown",t=>{this.onMouseDown(t)}),window.addEventListener("mouseup",t=>{this.onMouseUp(t)}),window.addEventListener("mousemove",t=>{this.onMouseMove(t)}),window.addEventListener("keydown",t=>{this.onKeyDown(t)}),window.addEventListener("keyup",t=>{this.onKeyUp(t)}),this.scene=new w,this.camera=new p(this.fov,this.aspectRatio,this.znear,this.zfar),this.clock=new m}start(){this.createScene(),this.mainLoop()}mainLoop(){this.update(this.clock.getDelta()),this.renderer.render(this.scene,this.camera),window.requestAnimationFrame(()=>this.mainLoop())}resize(){this.renderer.setSize(window.innerWidth,window.innerHeight);var e=new M;this.renderer.getViewport(e);var s=window.innerWidth/window.innerHeight;this.aspectRatio>s?this.renderer.setViewport(0,(window.innerHeight-window.innerWidth/this.aspectRatio)/2,window.innerWidth,window.innerWidth/this.aspectRatio):this.renderer.setViewport((window.innerWidth-window.innerHeight*this.aspectRatio)/2,0,window.innerHeight*this.aspectRatio,window.innerHeight)}onMouseDown(e){}onMouseUp(e){}onMouseMove(e){}onKeyDown(e){}onKeyUp(e){}}class x extends f{constructor(){super();a(this,"earthMesh");a(this,"earthMaterial");a(this,"debugMaterial");this.earthMesh=new v,this.earthMaterial=new b,this.debugMaterial=new k}initialize(){this.earthMaterial.map=new u().load("./data/earth-2k.png"),this.earthMesh.material=this.earthMaterial,this.debugMaterial.wireframe=!0;var e=[];e.push(-.5,-.5,0),e.push(.5,-.5,0),e.push(.5,.5,0),e.push(-.5,.5,0);var s=[];s.push(0,1,2),s.push(0,2,3),this.earthMesh.geometry.setAttribute("position",new y(e,3)),this.earthMesh.geometry.setIndex(s),this.add(this.earthMesh)}update(e){}toggleDebugMode(e){e?this.earthMesh.material=this.debugMaterial:this.earthMesh.material=this.earthMaterial}}class z{constructor(e){a(this,"date");a(this,"longitude");a(this,"latitude");a(this,"magnitude");this.date=new Date,this.date.setUTCFullYear(parseInt(e.substring(12,16))),this.date.setUTCMonth(parseInt(e.substring(17,19))),this.date.setUTCDate(parseInt(e.substring(20,22))),this.date.setUTCHours(parseInt(e.substring(24,26))),this.date.setUTCMinutes(parseInt(e.substring(27,29))),this.date.setUTCSeconds(parseFloat(e.substring(30,35))),this.longitude=parseFloat(e.substring(44,52)),this.latitude=parseFloat(e.substring(37,44)),this.magnitude=parseFloat(e.substring(66,70))}}class U{constructor(e){a(this,"earthquakes");a(this,"loaded");a(this,"maxMagnitude");a(this,"minMagnitude");this.earthquakes=[],this.loaded=!1,this.maxMagnitude=0,this.minMagnitude=1/0;var s=new T;s.load(e,r=>{var i=r.toString().split(`
`);i.forEach(t=>{if(t.length>30){var o=new z(t);this.earthquakes.push(o),o.magnitude>this.maxMagnitude?this.maxMagnitude=o.magnitude:o.magnitude<this.minMagnitude&&(this.minMagnitude=o.magnitude)}}),this.loaded=!0})}findMostRecentQuake(e){for(var s=e.getTime(),r=0,i=this.earthquakes.length-1;r<i-1;){var t=Math.floor((r+i)/2);this.earthquakes[t].date.getTime()>s?i=t-1:r=t}return r==i||this.earthquakes[i].date.getTime()>s?r:i}getMaxTime(){return this.earthquakes[this.earthquakes.length-1].date.getTime()}getMinTime(){return this.earthquakes[0].date.getTime()}}class E extends S{constructor(){super(60,1920/1080,.1,50);a(this,"earth");a(this,"gui");a(this,"earthquakeDB");a(this,"currentTime");a(this,"date");a(this,"viewMode");a(this,"playbackSpeed");a(this,"debugMode");this.gui=new D,this.earth=new x,this.earthquakeDB=new U("./data/earthquakes.txt"),this.currentTime=1/0,this.date="",this.viewMode="Map",this.playbackSpeed=.5,this.debugMode=!1}createScene(){this.camera.position.set(0,0,3.5),this.camera.lookAt(0,0,0),this.camera.up.set(0,1,0);var e=new L("white",.25);this.scene.add(e);var s=new C("white",.6);s.position.set(10,10,10),this.scene.add(s),this.scene.background=new u().load("./data/iss006e40544.png"),this.earth.initialize(),this.scene.add(this.earth);var r=this.gui.addFolder("Earthquake Controls"),i=r.add(this,"date");i.name("Current Date"),i.listen();var t=r.add(this,"viewMode",{Map:"Map",Globe:"Globe"});t.name("View Mode"),t.onChange(h=>{this.changeViewMode(h)});var o=r.add(this,"playbackSpeed",0,1);o.name("Playback Speed");var d=r.add(this,"debugMode");d.name("Debug Mode"),d.onChange(h=>{this.toggleDebugMode(h)}),this.gui.width=300,r.open()}update(e){if(!this.earthquakeDB.loaded)return;const s=3e7*1e3;this.currentTime+=s*this.playbackSpeed*e,this.currentTime>this.earthquakeDB.getMaxTime()&&(this.currentTime=this.earthquakeDB.getMinTime());var r=new Date;r.setTime(this.currentTime),this.date=r.getUTCMonth()+"/"+r.getUTCDate()+"/"+r.getUTCFullYear()}toggleDebugMode(e){this.earth.toggleDebugMode(e)}changeViewMode(e){console.log("View mode changed to: "+e)}}var F=new E;F.start();
